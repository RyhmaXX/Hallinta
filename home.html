<style>
.modal {
   position: absolute;
   top: 30%;
}
</style>
<div class="btn-group btn-group-justified">
	<a href="#/home" class="btn btn-primary"><i class="glyphicon glyphicon-home"></i></a>
	<a href="#/new" class="btn btn-primary"><i class="glyphicon glyphicon-plus"></i></a>
	<a href="#/results" class="btn btn-primary"><i class="glyphicon glyphicon-search"></i></a>
	<a href="#/settings" class="btn btn-primary"><i class="glyphicon glyphicon-cog"></i></a>
	<a href="php/logout.php" class="btn btn-primary"><i class="glyphicon glyphicon-log-out"></i></a>
</div>

<br>

<div class="container">
	<div class="well">
		<h4>Kyselyt:</h4>
		<div class="table-responsive">
		<table class="table table-bordered">
		
		<thead>
				<tr>
					<th>Nimi:</th>
					<th>Alkaa:</th>
					<th>Päättyy:</th>
					<th>Tila:</th>
					<th>Toiminnot:</th>
				</tr>
		</thead>
		<tbody>
		<tr ng-repeat="x in polls">		
					<td>{{x.name}}</td>
					<td>{{x.start != null ? x.start : "-"}}</td>
					<td>{{x.end != null ? x.end : "-"}}</td>
					<td>{{x.status}}</td>
					<td>
						<button type="button" title="Muokkaa" class="btn btn-info btn-sm" ng-click="fetchPoll(x.id)" data-toggle="modal" data-target="#editModal" ng-hide="x.status != 'Luotu'"><i class="glyphicon glyphicon-wrench"></i></button>
						<button type="button" title="Julkaise" class="btn btn-info btn-sm" ng-click="saveId(x.id)" data-toggle="modal" data-target="#publishModal" ng-hide="x.status != 'Luotu'"><i class="glyphicon glyphicon-export"></i></button>
						<button type="button" title="Poista" class="btn btn-danger btn-sm" ng-click="saveId(x.id)"data-toggle="modal" data-target="#deleteModal"><i class="glyphicon glyphicon-remove-circle"></i></button>
					</td>
				</tr>
		</tbody>
		</table>
		</div>
	</div>
	
	<!-- Publish Modal-->
	<div class="modal fade" id="publishModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Kyselyn julkaisu</h4>
        </div>
        <div class="modal-body">
          <p>Julkaistaanko kysely?</p>
        </div>
        <div class="modal-footer">
		<center>
			<button type="button" class="btn btn-default" ng-click="publish()">Julkaise</button>
			<button type="button" class="btn btn-default" data-dismiss="modal">Peruuta</button>
		</center>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Edit Modal-->
  <div class="modal fade" id="editModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Kyselyn muokkaus</h4>
        </div>
			<div class="modal-body">
				<div class="form-group">
					<label for="usr">Kyselyn nimi:</label>
					<input type="text" class="form-control" ng-model="name" ng-change="check()">
				</div>
				<label>Päivämäärät:
					<input type="checkbox" ng-model="adddate" ng-change="check()">
				</label><br/>
				<div class="form-group" ng-show="adddate">
					<label>Alkamispvm:</label>
					<input type="date" class="form-control" ng-model="startdate" ng-change="check()">
				</div>
				
				<div class="form-group" ng-show="adddate">
					<label>Loppumispvm:</label>
					<input type="date" class="form-control" ng-model="enddate" ng-change="check()">
				</div>
			</div>
			<div class="modal-footer">
				<button class="btn btn-sm {{ok ? 'btn-success' : 'btn-disabled'}}" ng-disabled="!ok" ng-click="edit()">Päivitä</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">Peruuta</button>
			</div>
		  </div>
		</div>
	  </div>	  
	  
	  <!-- Delete Modal-->
	  <div class="modal fade" id="deleteModal" role="dialog">
		<div class="modal-dialog">
		
		  <!-- Modal content-->
		  <div class="modal-content">
			<div class="modal-header">
			  <button type="button" class="close" data-dismiss="modal">&times;</button>
			  <h4 class="modal-title">Kyselyn poisto</h4>
			</div>
			<div class="modal-body">
			  <p>Poistetaanko kysely?</p>
			</div>
			<div class="modal-footer">
			<center>
				<button type="button" class="btn btn-default" ng-click="delete()">Poista</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">Peruuta</button>
			</center>
			</div>
		  </div>
		</div>
	  </div>
</div>
